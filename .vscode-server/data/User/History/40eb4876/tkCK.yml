services:
# 해당 구조 및 설정을 다른 컨테이너에서도 동일하게 사용하기 위해 was 이름의 앵커를 사용
# 일종의 상속(extends) 형태
    apache1: &was
        build:
            context: .
            dockerfile: ./Dockerfile
        container_name: apache1
        hostname: apache1 
        privileged: true 
        stdin_open: true             
        restart: always
        ports:
            - "2001:22"          
    
    tomcat1:
# 위에서 설정한 was 앵커 적용
# 앵커와 다른 부분은 수정해서 작성
        <<: *was
        container_name: tomcat1
        hostname: tomcat1          
        ports: 
            - "3001:22"

    mysql1:
        <<: *was
        build:
        container_name: mysql1 
        hostname: mysql1        
        ports: 
            - "6001:22"
            - "33306:3306"

    nginx1:
        <<: *was
        container_name: nginx1 
        hostname: nginx1       
        ports: 
            - "5001:22"
            - "443:443"
            - "80:80"